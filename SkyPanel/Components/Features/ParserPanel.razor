@inject ISnackbar Snackbar
@inject IDialogService DialogService

<MudStack>
    <MudGrid>
        <MudItem xs="12">
            <MudAutocomplete 
                T="string"
                @bind-Value=Parser
                                     Clearable="true"
                                     SearchFunc="@Search"
                                     Variant="Variant.Outlined"
                                     Label="Select Parser"
                                     ResetValueOnEmptyText="true"
                                     SelectValueOnTab="true"
                                     Placeholder="No Parser Selected"
                                     />
        </MudItem> 
    </MudGrid>
    <MudGrid Class="d-flex justify-center" Style="margin-top: 0.1em">
        <MudItem>
            <MudButton OnClick="@(() => OpenFileDialogAsync())" Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.FileUpload" Color="Color.Primary"  Disabled="ParserState.ParserIsNotSelected()">
                Upload Dataset
            </MudButton>
           
        </MudItem>
        <MudItem>
            <MudButton OnClick="@(() => OpenReparseDialogAsync())" Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.PublishedWithChanges" Color="Color.Primary"  Disabled="ParserState.ParserIsNotSelected()">
                Fetch and Parse Latest Dataset
            </MudButton>
        </MudItem>
    </MudGrid>
</MudStack>

@code
{
    //TODO: Loop through all role
    //https://auth0.com/docs/api/management/v2/roles/get-roles#endpoint
    //https://manage.auth0.com/dashboard/eu/scalabledataintegration/apis/management/explorer api explorer
    
    
    [CascadingParameter]
    private Task<AuthenticationState> authenticationStateTask { get; set; }
  
    private async Task SetAuthor()
    {
        var authenticationState = await authenticationStateTask;
        if (authenticationState.User.IsInRole("Developer"))
        {
            
        }
    }
}
