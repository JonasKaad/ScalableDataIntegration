@using SkyPanel.Components.Models
@inject IJSRuntime JS
@if (_blobDataItems == null)
{
    <MudProgressCircular Color="Color.Default" Indeterminate="true" />
}
else
{
    <MudTable Items="_blobDataItems" Hover="true" SortLabel="Sort By" Elevation="0" AllowUnsorted="false">
        <HeaderContent>
            <MudTh><MudTableSortLabel SortBy="new Func<Dataset, object>(x=>x.Parser!)">Parser</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel InitialDirection="SortDirection.Ascending" SortBy="new Func<BlobDataItem, object>(x=>x.Date)">Date</MudTableSortLabel></MudTh>
            <MudTh/>
            <MudTh/>
            <MudTh/>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Parser">@context.Parser</MudTd>
            <MudTd DataLabel="Date">@context.Date.ToString("dd/MM/yyyy HH\\:mm")</MudTd>
            <MudTd DataLabel="Download Raw"><MudButton StartIcon="@Icons.Material.Filled.Download" Variant="Variant.Outlined" Color="Color.Info"  OnClick="@(() => Download(@context.Parser, @context.RawPath))">Raw</MudButton></MudTd>
            <MudTd DataLabel="Download Parsed"><MudButton StartIcon="@Icons.Material.Filled.Download" Variant="Variant.Outlined" Color="Color.Primary" OnClick="@(() => Download(@context.Parser, @context.ParsedPath))">Parsed</MudButton></MudTd>
            <MudTd DataLabel="Delete Dataset"><MudButton StartIcon="@Icons.Material.Filled.Delete" Variant="Variant.Outlined" Color="Color.Error">Delete</MudButton></MudTd>
        </RowTemplate>
        <PagerContent>
            <MudTablePager PageSizeOptions="new []{5, 10}" />
        </PagerContent>
    </MudTable>
}